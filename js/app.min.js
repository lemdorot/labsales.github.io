(()=>{"use strict";let e=(e,t=500,a=0)=>{e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=`${e.offsetHeight}px`,e.offsetHeight,e.style.overflow="hidden",e.style.height=a?`${a}px`:"0px",e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.hidden=!a,!a&&e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),!a&&e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide"),document.dispatchEvent(new CustomEvent("slideUpDone",{detail:{target:e}}))}),t))},t=(e,t=500,a=0)=>{if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden=!e.hidden&&null,a&&e.style.removeProperty("height");let i=e.offsetHeight;e.style.overflow="hidden",e.style.height=a?`${a}px`:"0px",e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=i+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide"),document.dispatchEvent(new CustomEvent("slideDownDone",{detail:{target:e}}))}),t)}},a=!0,i=(e=500)=>{let t=document.querySelector("body");if(a){let i=document.querySelectorAll("[data-lp]");setTimeout((()=>{for(let e=0;e<i.length;e++){i[e].style.paddingRight="0px"}t.style.paddingRight="0px",document.documentElement.classList.remove("lock")}),e),a=!1,setTimeout((function(){a=!0}),e)}},s=(e=500)=>{let t=document.querySelector("body");if(a){let i=document.querySelectorAll("[data-lp]");for(let e=0;e<i.length;e++){i[e].style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px"}t.style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",document.documentElement.classList.add("lock"),a=!1,setTimeout((function(){a=!0}),e)}};function n(e,t){const a=Array.from(e).filter((function(e,a,i){if(e.dataset[t])return e.dataset[t].split(",")[0]}));if(a.length){const e=[];a.forEach((a=>{const i={},s=a.dataset[t].split(",");i.value=s[0],i.type=s[1]?s[1].trim():"max",i.item=a,e.push(i)}));let i=e.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));i=function(e){return e.filter((function(e,t,a){return a.indexOf(e)===t}))}(i);const s=[];if(i.length)return i.forEach((t=>{const a=t.split(","),i=a[1],n=a[2],o=window.matchMedia(a[0]),l=e.filter((function(e){if(e.value===i&&e.type===n)return!0}));s.push({itemsArray:l,matchMedia:o})})),s}}const o={center:[37.723082,55.75254],zoom:13},l={center:[37.653082,55.75254],zoom:13},r={center:[37.634182,55.76153],zoom:13},c={center:[37.665282,55.77052],zoom:13};window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),document.querySelector(".icon-menu")&&document.addEventListener("click",(function(e){a&&e.target.closest(".icon-menu")&&(((e=500)=>{document.documentElement.classList.contains("lock")?i(e):s(e)})(),document.documentElement.classList.toggle("menu-open"))})),function(){const a=document.querySelectorAll("[data-tabs]");let i=[];if(a.length>0){const e=function(){if(location.hash)return location.hash.replace("#","")}();e&&e.startsWith("tab-")&&(i=e.replace("tab-","").split("-")),a.forEach(((e,t)=>{e.classList.add("_tab-init"),e.setAttribute("data-tabs-index",t),e.addEventListener("click",l),function(e){let t=e.querySelectorAll("[data-tabs-titles]>*"),a=e.querySelectorAll("[data-tabs-body]>*");const s=e.dataset.tabsIndex,n=i[0]==s;if(n){const t=e.querySelector("[data-tabs-titles]>._tab-active");t&&t.classList.remove("_tab-active")}a.length&&(a=Array.from(a).filter((t=>t.closest("[data-tabs]")===e)),t=Array.from(t).filter((t=>t.closest("[data-tabs]")===e)),a.forEach(((e,a)=>{t[a].setAttribute("data-tabs-title",""),e.setAttribute("data-tabs-item",""),n&&a==i[1]&&t[a].classList.add("_tab-active"),e.hidden=!t[a].classList.contains("_tab-active")})))}(e)}));let t=n(a,"tabs");t&&t.length&&t.forEach((e=>{e.matchMedia.addEventListener("change",(function(){s(e.itemsArray,e.matchMedia)})),s(e.itemsArray,e.matchMedia)}))}function s(e,t){e.forEach((e=>{let a=(e=e.item).querySelector("[data-tabs-titles]"),i=e.querySelectorAll("[data-tabs-title]"),s=e.querySelector("[data-tabs-body]"),n=e.querySelectorAll("[data-tabs-item]");i=Array.from(i).filter((t=>t.closest("[data-tabs]")===e)),n=Array.from(n).filter((t=>t.closest("[data-tabs]")===e)),n.forEach(((n,o)=>{t.matches?(s.append(i[o]),s.append(n),e.classList.add("_tab-spoller")):(a.append(i[o]),e.classList.remove("_tab-spoller"))}))}))}function o(a){let i=a.querySelectorAll("[data-tabs-title]"),s=a.querySelectorAll("[data-tabs-item]");const n=a.dataset.tabsIndex;const o=function(e){if(e.hasAttribute("data-tabs-animate"))return e.dataset.tabsAnimate>0?Number(e.dataset.tabsAnimate):500}(a);if(s.length>0){const l=a.hasAttribute("data-tabs-hash");s=Array.from(s).filter((e=>e.closest("[data-tabs]")===a)),i=Array.from(i).filter((e=>e.closest("[data-tabs]")===a)),s.forEach(((a,s)=>{var r;i[s].classList.contains("_tab-active")?(o?t(a,o):a.hidden=!1,l&&!a.closest(".popup")&&(r=(r=`tab-${n}-${s}`)?`#${r}`:window.location.href.split("#")[0],history.pushState("","",r))):o?e(a,o):a.hidden=!0}))}}function l(e){const t=e.target;if(t.closest("[data-tabs-title]")){const a=t.closest("[data-tabs-title]"),i=a.closest("[data-tabs]");if(!a.classList.contains("_tab-active")&&!i.querySelector("._slide")){let e=i.querySelectorAll("[data-tabs-title]._tab-active");e.length&&(e=Array.from(e).filter((e=>e.closest("[data-tabs]")===i))),e.length&&e[0].classList.remove("_tab-active"),a.classList.add("_tab-active"),o(i)}e.preventDefault()}}}();const d=document.querySelectorAll(".menu__link");window.matchMedia("(max-width: 992px)").matches&&d.forEach((e=>{e.addEventListener("click",(t=>{if(t.preventDefault(),console.log(e.classList),e.nextSibling)for(;e.parentNode.children;)if(e.nextElementSibling.classList.contains("menu__list")){if(e.classList.contains("active")){e.classList.remove("active"),e.nextElementSibling.style.maxHeight=e.nextElementSibling.scrollHeight+"px",e.nextElementSibling.style.paddingTop=0,setTimeout((()=>{e.nextElementSibling.style.maxHeight=0}),5),setTimeout((()=>{e.nextElementSibling.style.display="none"}),600);break}e.classList.add("active"),e.nextElementSibling.style.display="flex",setTimeout((()=>{e.nextElementSibling.style.maxHeight=e.nextElementSibling.scrollHeight+30+"px",e.nextElementSibling.style.paddingTop="15px"}),5),setTimeout((()=>{e.nextElementSibling.style.maxHeight="none"}),400);break}}))})),window.addEventListener("load",(function(e){document.querySelector(".advantages__slider")&&new Swiper(".advantages__slider",{slidesPerView:1.2,spaceBetween:36,pagination:{clickable:!0},autoplay:{delay:3e3,disableOnInteraction:!1},watchOverflow:!0,breakpoints:{640:{slidesPerView:2,spaceBetween:36,autoHeight:!0},768:{slidesPerView:3,spaceBetween:36},1200:{slidesPerView:4,spaceBetween:36}},simulateTouch:!0,touchRatio:1,touchAngle:45,grabCursor:!0,slideToClickedSlide:!0}),new Swiper(".complex__slider",{slidesPerView:1,autoHeight:!1,grid:{rows:2},spaceBetween:36,pagination:{el:".swiper-pagination",clickable:!0},watchOverflow:!0,breakpoints:{640:{slidesPerView:2,spaceBetween:36,grid:{rows:2}},768:{slidesPerView:3,spaceBetween:36,grid:{rows:2}},1200:{slidesPerView:4,spaceBetween:31,grid:{rows:2}}},autoplay:{delay:3e3,disableOnInteraction:!1},simulateTouch:!0,touchRatio:1,touchAngle:45,grabCursor:!0,slideToClickedSlide:!0})})),window.map=null,async function(){await ymaps3.ready;const{YMap:e,YMapDefaultSchemeLayer:t,YMapDefaultFeaturesLayer:a,YMapFeatureDataSource:i,YMapLayer:s,YMapControls:n,YMapMarker:d}=ymaps3;map=new e(document.getElementById("app"),{location:o}),map.addChild(new t),map.addChild(new a),map.addChild(new i({id:"popups"})),map.addChild(new s({source:"popups"}));class p extends ymaps3.YMapComplexEntity{_onAttach(){this._actualize()}_onDetach(){this.marker=null}_onUpdate(e){e.coordinates&&this.marker?.update({coordinates:e.coordinates}),this._actualize()}_actualize(){const e=this._props;this._lazyCreatePopup(),this._lazyCreateMarker(),this._state.popupOpen&&e.popupHidesMarker?this.marker&&this.removeChild(this.marker):this.addChild(this.marker),this._state.popupOpen?this.popupElement.style.display="flex":this.popupElement&&(this.popupElement.style.display="none")}_lazyCreateMarker(){if(this.marker)return;const e=document.createElement("div");e.className="my-marker__pin";const t=document.createElement("img");t.className="my-marker__img",t.src="./img/map/pin-1.svg";const a=document.createElement("div");a.className="my-marker",a.append(t),a.append(e),this._markerElement=a,e.onclick=()=>{this._state.popupOpen=!0,this._actualize()};const i=document.createElement("div");i.append(this._markerElement,this.popupElement),this.marker=new d({coordinates:this._props.coordinates},i)}_lazyCreatePopup(){if(this.popupElement)return;const e=document.createElement("div");e.className="popup";const t=document.createElement("div");t.className="popup__text",t.textContent=this._props.popupContent,e.append(t),this.popupElement=e}constructor(e){super(e),this._state={popupOpen:!1}}}map.addChild(new p({coordinates:l.center,popupContent:'ЖК "Яблоновский"'})),map.addChild(new p({coordinates:r.center,popupContent:"Магазины"})),map.addChild(new p({coordinates:c.center,popupContent:"Детский сад"}));const m=document.querySelectorAll(".my-marker__img"),u=document.querySelectorAll(".my-marker");m.forEach(((e,t)=>{e.src=`./img/map/pin-${t+1}.svg`}));const h=document.querySelector(".map__tabs-container");u.forEach(((e,t)=>{e.id=`marker-${t+1}`;const a=document.createElement("div");a.className="card tab-map";const i=document.createElement("div");i.className="card__wrap tab-map__wrap",a.append(i);const s=document.createElement("span"),n=document.createElement("img");n.src=e.firstChild.src,s.append(n);const o=document.createElement("p");o.className="card__text tab-map__text",o.textContent=e.nextElementSibling.firstChild.textContent,i.append(s,o),e.onclick=()=>{a.classList.contains("active")?(e.nextElementSibling.style.display="none",a.classList.remove("active")):(e.nextElementSibling.style.display="flex",a.classList.add("active"))},a.onclick=()=>{a.classList.contains("active")?(e.nextElementSibling.style.display="none",a.classList.remove("active")):(e.nextElementSibling.style.display="flex",a.classList.add("active"))},h.append(a)}))}();const p=document.querySelector("#app");window.addEventListener("resize",(e=>{window.matchMedia("(min-width: 992px)").matches?p.style.height="662px":p.style.height="622px"}));const m=document.querySelectorAll(".tabs__btn"),u=document.querySelector(".tabs__photos"),h=document.querySelectorAll(".tabs__body");m.forEach((e=>{e.onclick=()=>{u.innerHTML="",h.forEach((e=>{if(e.hasAttribute("hidden")){const t=e.firstElementChild.firstElementChild.cloneNode(!0);u.append(t)}}))}}))})();